+++
title = "ウェブサイトの再構築"
date = 2025-12-01

+++

このウェブサイト（shiimaxx.com）を再構築しました。元々は、はてなブログとQiitaの記事一覧を表示するだけの簡素なものだったのですが、今後はこのウェブサイト自体にもコンテンツを載せられるようにしました。
最近になって文章を書くことに対して興味が湧いてきて、自分用の書くための場所がほしくなったというのが理由です。

## アーキテクチャー
元々はNextJSのSSGを使っていて、`getStaticProps` で


再構築にあたっては、元々のNextJSベース（SSG + getStaticProps）の仕組みをやめて静的サイトジェネレーターを使うことにしました。普段フロントエンド周りの技術に触れることが少ないので無理矢理にでも使ってみることにしてたのですが、最近では可処分時間も減ってきて優先度の高いことに集中したいという考えからです。

具体的なツールについては、自分の用途的にEleventyとZolaが候補にあがっていて、なんとなくRust製のZolaに惹かれたので採用することにしました。あと今使っているSereneというテーマがシンプルで自分のイメージにあっていたというのもあります。

Sereneというテーマにはリアクション機能が組み込まれています。この記事ページの右下に表示されているやつですね。サーバーサイドのAPIを自分で用意すればこの機能が使えます。既存の実装がいくつかあったのですが、せっかくなのでHonoを使って自分でAPIを実装してみました。自分で書いたコードがまったくないというのも少しさみしいので、ちょうどよい規模感の実装ができる余地があってよかったです。

静的コンテンツのホスティングはCloudflare Pages、サーバーサイドAPIの部分はPages Functionで動かしています。ページごとのリアクションと、ユーザーごとのリアクションのデーターはCloudflare KVに保存しています。
リアクションのユーザーを識別する部分については、既存実装では接続元IPアドレスから算出したハッシュ値をユーザーIDとしているものがほとんどでしたが、自分の実装ではCookieで実装してみました。Cookieを扱うこともあってウェブサイト自体とバックエンドAPIのオリジンを同一にしたいと考え、それもあってWorkerではなくPages Functionを使っています。

今後は考える行為の一環として文章を書いて行こうと思います。たまに技術とは関係ない普段の生活のことなんかも書くかもしれません。